import { useEffect, useRef, useState } from "react";

import { chandanInfo } from "./chandanInfo";
import ChatBotIcon from "./ChatBotIcon";
import ChatForm from "./ChatForm";
import ChatMassage from "./ChatMassage";

import './style.css';

function ChatBot() {

    const [chatHistory, setChatHistory] = useState([
        {
            hideInChat: true,
            role: "model",
            text: chandanInfo
        }
    ]);

    const [showChatBot, setShowChatBot] = useState(false);
    const [showBtn, setShowBtn] = useState(true);

    const chatBotRef = useRef();

    const generateBotResponse = async (history) => {

        const updateHistory = (text, isError = false) => {
            // Helper function to update chat history with bot's response
            setChatHistory(prev => [...prev.filter(msg => msg.text !== "Thinking..."), { role: "model", text, isError }]);
        };

        // Remove the "Thinking..." placeholder
        history = history.map(({role, text}) => ({role, parts: [{text}]}));

        const requestOptions = {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ contents: history})
        }

        try {
            // Make the API call to get bot's response
            const response = await fetch(import.meta.env.VITE_API_URL, requestOptions);
            const data = await response.json();

            if(!response.ok) {
                throw new Error(data.error.message || "Something went wrong!");
            }

            // console.log(data);

            // clean and update chat history with bot's response
            const apiResponseText = data.candidates[0].content.parts[0].text.replace(/\*\*(.*?)\*\*/g, "$1").trim();
            updateHistory(apiResponseText);
        } catch (error) {
            updateHistory(error.massage, true);
        }
    };

    // Button Change Effect
    let changeBtn = () => {
        setShowBtn(!showBtn);
        setShowChatBot(prev => !prev)
    }

    let condition1 = showBtn ? "show" : "not-show";
    let condition2 = showBtn ? "not-show" : "show";

    useEffect(() => {
        // Auto-scroll whenever chat history updates
        chatBotRef.current.scrollTo({top: chatBotRef.current.scrollHeight, behavior: "smooth"});
    }, [chatHistory]);

    return (
        <div className={`container font-[poppins] ${showChatBot ? "show-chatbot" : ""}`}>

            <button onClick={changeBtn} className="chatbot-toggler fixed bottom-5 sm:bottom-6 right-5 sm:right-9 border-none h-12 w-12 flex cursor-pointer rounded-full bg-red-800 justify-center items-center transition-all duration-200 ease-in-out">
                <span className={`material-symbols-outlined absolute text-[#fff] ${condition1}`}>mode_comment</span>
                <span className={`material-symbols-outlined absolute text-[#fff] ${condition2}`}>close</span>
            </button>

            <div className="chatbot-popup fixed opacity-0 pointer-events-none bottom-0 sm:bottom-20 right-0 sm:right-9 w-full sm:w-[420px] h-screen sm:h-max overflow-hidden bg-[#fff] rounded-none sm:rounded-lg shadow-lg transition-all scale-50 duration-100 ease-in">
                {/* ChatBox header  */}
                <div className="chat-header flex px-4 sm:px-6 py-3 sm:py-3 items-center justify-between bg-red-800">
                    <div className="header-info flex gap-3 items-center">

                        <ChatBotIcon />
                        <h2 className="logo-text text-[#fff] font-bold text-[21px]">AI ChatBot</h2>

                    </div>
                    <button onClick={changeBtn} className="material-symbols-outlined h-10 w-10 border-none outline-none text-[#fff] cursor-pointer text-[28px] pt-1 rounded-full -mr-2 bg-none hover:bg-red-900 transition-all duration-200 ease-in-out ">keyboard_arrow_down</button>
                </div>

                {/* Chat body */}
                <div ref={chatBotRef} className="chat-body h-[80vh] sm:h-[460px] overflow-y-auto py-6 px-4 sm:p-6 mb-16 flex flex-col gap-5">
                    <div className="massage bot-massage flex gap-3 items-center">
                        {/* <ChatBotIcon className="fill-[#fff] bg-red-800" /> */}
                        {/* <svg className="h-9 w-9 p-1.5 fill-[#fff] bg-red-800 rounded-full" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024"><path d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z" /></svg> */}
                        <svg xmlns="http://www.w3.org/2000/svg" className="w-9 h-9 p-1.5 fill-red-800 bg-red-800 rounded-full" stroke="none" fill-rule="evenodd" viewBox="0 0 3499 3499" version="1.1"><path className="fill-[#fff]" stroke="none" fill-rule="evenodd" d="M 476.500 269.579 C 450.468 275.296, 439.813 278.787, 422.994 287.107 C 396.383 300.271, 372.960 318.211, 351.003 342.243 C 344.434 349.433, 338.126 357.355, 336.948 359.894 C 335.773 362.427, 333.025 366.640, 330.842 369.255 C 320.634 381.483, 305.058 425.596, 300.940 453.945 C 297.408 478.254, 304.338 524.553, 315.955 554.266 C 340.071 615.948, 395.261 664.650, 459 680.496 C 472.273 683.795, 480.727 684.923, 500.085 685.976 C 523.467 687.248, 524.858 688.179, 529.080 705.386 C 530.310 710.399, 535.111 725.525, 539.750 739 C 555.167 783.783, 565.036 813.351, 569.123 827 C 571.346 834.425, 574.927 844.275, 577.082 848.888 C 579.237 853.502, 581 858.804, 581 860.670 C 581 862.536, 583.193 869.786, 585.874 876.781 C 592.969 895.294, 602 924.748, 602 929.377 C 602 930.267, 595.169 932.666, 581.750 936.489 C 495.147 961.162, 438.851 992.338, 383.101 1046.500 C 349.455 1079.187, 324.619 1109.686, 305.332 1142 C 296.629 1156.582, 275.231 1198.696, 271.471 1208.644 C 266.620 1221.481, 259.890 1246.453, 255.476 1268 C 253.053 1279.825, 250.374 1291.975, 249.522 1295 C 246.887 1304.357, 246.046 1425.161, 246.033 1796.500 C 246.017 2242.621, 248.156 2655.441, 250.930 2741.500 L 251.736 2766.500 257.426 2786.500 C 268.134 2824.140, 270.117 2830.515, 274.685 2842 C 303.297 2913.929, 364.663 2989.542, 431.500 3035.222 C 467.328 3059.709, 501.270 3075.866, 544.500 3089.014 C 553.850 3091.858, 578.334 3098.418, 598.908 3103.592 L 636.317 3113 968.936 3113 C 1257.061 3113, 1301.830 3112.807, 1303.614 3111.558 C 1305.402 3110.306, 1402.308 3110.060, 2039.087 3109.692 C 2848.929 3109.225, 2846.944 3109.241, 2882.803 3102.948 C 2907.270 3098.654, 2947.039 3087.392, 2976.986 3076.277 C 2996.137 3069.169, 3002.014 3066.419, 3021.627 3055.385 C 3028.847 3051.323, 3035.198 3048, 3035.740 3048 C 3037.981 3048, 3061.399 3031.476, 3073.438 3021.400 C 3098.189 3000.685, 3129.978 2968.132, 3150.839 2942.137 C 3168.209 2920.493, 3180.255 2900.649, 3197.966 2864.500 C 3209.665 2840.623, 3212.640 2833.108, 3217.957 2814 C 3220.176 2806.025, 3223.595 2794.325, 3225.555 2788 C 3234.575 2758.891, 3236.327 2733.319, 3238.059 2605.500 C 3239.530 2496.984, 3238.731 1375.369, 3237.153 1333.500 C 3235.751 1296.309, 3234.680 1285.890, 3230.930 1273 C 3229.251 1267.225, 3227.493 1258.893, 3227.024 1254.485 C 3226.443 1249.022, 3224.906 1243.292, 3222.196 1236.485 C 3220.009 1230.993, 3216.594 1221.287, 3214.606 1214.915 C 3212.137 1207, 3207.056 1195.435, 3198.569 1178.415 C 3176.350 1133.850, 3168.474 1120.892, 3148.481 1096 C 3093.925 1028.078, 3037.995 986.370, 2960 955.447 C 2928.600 942.998, 2908.747 936.800, 2892.821 934.474 C 2890.798 934.178, 2888.125 933.112, 2886.882 932.105 C 2884.701 930.340, 2884.667 930.064, 2885.917 924.387 C 2888.638 912.036, 2896.711 885.782, 2912.481 838 C 2921.466 810.775, 2934.011 771.625, 2940.360 751 C 2949.376 721.706, 2960.271 688.697, 2961.370 687.340 C 2961.442 687.252, 2970.050 686.448, 2980.500 685.554 C 3019.374 682.226, 3039.157 677.619, 3062.651 666.422 C 3110.191 643.766, 3161.022 584.363, 3175.439 534.615 C 3179.929 519.118, 3181.728 489.799, 3180.080 458.982 C 3178.830 435.628, 3177.224 425.710, 3172.489 412.108 C 3161.189 379.643, 3144.856 352.054, 3124.530 331.098 C 3092.549 298.126, 3070.362 285.214, 3025.500 273.463 C 2984.865 262.820, 2947.916 263.690, 2910.240 276.178 C 2852.657 295.264, 2804.095 340.495, 2779.863 397.612 C 2769.069 423.056, 2764.085 446.202, 2763.307 474.500 C 2761.934 524.422, 2774.519 562.236, 2807.073 606 C 2818.932 621.943, 2842.878 645.998, 2856.154 655.305 L 2865.809 662.073 2856.966 688.286 C 2852.103 702.704, 2841.549 735.425, 2833.513 761 C 2816.527 815.057, 2797.752 874.195, 2788.749 902 L 2782.434 921.500 2157.467 921.262 C 1813.735 921.130, 1345.692 920.737, 1117.371 920.388 L 702.242 919.752 701.046 915.626 C 698.177 905.725, 672.931 827.970, 647.233 749.884 L 619.385 665.268 650.474 633.884 C 667.590 616.605, 684.615 598.455, 688.354 593.500 C 695.341 584.241, 705.702 564.381, 710.265 551.500 C 716.204 534.738, 721.997 502.124, 722.699 481.500 C 725.001 413.890, 685.451 341.814, 623.566 300.840 C 594.165 281.373, 564.833 271.237, 524.121 266.475 C 505 264.238, 499.046 264.626, 476.500 269.579 M 1088.500 1483.046 C 1077.240 1484.205, 1054.286 1489.880, 1039.205 1495.232 C 1014.313 1504.065, 986.608 1519.981, 965.215 1537.737 C 951.535 1549.091, 928.993 1572.469, 919.604 1585.040 C 901.524 1609.247, 886.057 1641.889, 875.831 1677.421 C 871.236 1693.387, 870.673 1699.224, 871.334 1724 C 872.444 1765.541, 877.555 1794.174, 889.027 1823.122 C 910.242 1876.655, 959.019 1928.343, 1013.485 1955.009 C 1047.207 1971.518, 1080.432 1979.142, 1119 1979.219 C 1148.252 1979.278, 1169.748 1975.974, 1196.323 1967.335 C 1259.128 1946.919, 1309.924 1904.846, 1342.210 1846.500 C 1355.560 1822.373, 1366.161 1793.084, 1369.536 1771 C 1371.236 1759.877, 1371.496 1722.595, 1369.976 1708 C 1365.008 1660.315, 1349.208 1620.298, 1320.081 1581.628 C 1299.925 1554.868, 1261.245 1518.911, 1247.801 1514.437 C 1245.216 1513.577, 1239.273 1510.393, 1234.594 1507.362 C 1218.140 1496.703, 1189.838 1488.970, 1151 1484.520 C 1134.267 1482.603, 1100.529 1481.807, 1088.500 1483.046 M 2324.500 1483.986 C 2305.631 1486.280, 2271.888 1497.950, 2250 1509.751 C 2227.440 1521.915, 2211.755 1533.381, 2193.594 1550.988 C 2156.543 1586.907, 2136.569 1618.904, 2126.535 1658.414 C 2119.891 1684.571, 2117.308 1716.798, 2118.975 1752.730 C 2120.625 1788.317, 2124.626 1804.308, 2139.936 1836.500 C 2153.881 1865.821, 2188.809 1910.928, 2209.436 1926.252 C 2225.794 1938.404, 2267.222 1961.357, 2278.288 1964.399 C 2281.155 1965.187, 2292.500 1968.329, 2303.500 1971.381 C 2330.086 1978.759, 2338.341 1979.991, 2361.199 1979.996 C 2396.270 1980.004, 2428.734 1973.463, 2463.149 1959.456 C 2494.070 1946.871, 2516.859 1932.021, 2537.718 1910.864 C 2582.980 1864.957, 2613.393 1796.549, 2615.683 1735.500 C 2616.538 1712.717, 2613.586 1693.331, 2605.382 1667.852 C 2584.616 1603.355, 2545.172 1549.391, 2496.960 1519.520 C 2468.466 1501.865, 2432.213 1487.786, 2408 1484.972 C 2396.035 1483.582, 2333.861 1482.847, 2324.500 1483.986 M 1360.781 2188.399 C 1352.217 2191.922, 1346.070 2196.231, 1338.653 2203.914 C 1315.457 2227.941, 1315.415 2271.500, 1338.499 2365.530 C 1352.010 2420.571, 1373.817 2467.199, 1406.362 2510.644 C 1449.812 2568.645, 1504.230 2612.445, 1570.556 2642.801 C 1600.204 2656.371, 1618.996 2662.618, 1642 2666.552 C 1649.975 2667.916, 1660.550 2669.902, 1665.500 2670.965 C 1682.850 2674.689, 1695.772 2675.457, 1741.500 2675.479 C 1788.181 2675.501, 1796.045 2674.992, 1820.500 2670.363 C 1844.623 2665.798, 1875.323 2656.998, 1897.500 2648.294 C 1979.250 2616.206, 2055.820 2549.596, 2102.889 2469.622 C 2116.045 2447.270, 2131.215 2413.557, 2136.015 2396.004 C 2137.595 2390.227, 2140.199 2381.225, 2141.802 2376 C 2145.034 2365.461, 2145.703 2362.660, 2153.001 2329.109 C 2161.086 2291.938, 2163.174 2270.916, 2161.040 2248.182 C 2158.825 2224.584, 2154.888 2214.905, 2142.417 2202.395 C 2121.421 2181.333, 2091.987 2180.536, 2070.208 2200.441 C 2063.583 2206.495, 2061.023 2210.421, 2057.711 2219.605 C 2054.167 2229.429, 2051.460 2246.930, 2048.524 2279 C 2044.243 2325.755, 2042.130 2336.777, 2033.147 2359.202 C 2002.066 2436.797, 1961.211 2488.578, 1904.298 2522.510 C 1889.442 2531.368, 1864.401 2543.849, 1848.192 2550.474 C 1827.067 2559.110, 1820.724 2560.705, 1788.188 2565.568 C 1753.236 2570.791, 1738.487 2571.399, 1715.500 2568.564 C 1636.448 2558.811, 1586.092 2536.634, 1530.602 2487.134 C 1505.410 2464.662, 1489.391 2442.643, 1468.959 2402.403 C 1446.958 2359.074, 1438.965 2328.775, 1434.464 2271.649 C 1431.339 2231.980, 1426.104 2214.421, 1413.735 2202.117 C 1400.202 2188.654, 1375.635 2182.290, 1360.781 2188.399" /><path d="M 0 1749.500 L 0 3499.001 1749.750 3498.750 L 3499.500 3498.500 3499.750 1749.250 L 3500.001 -0 1750 -0 L 0 0 0 1749.500 M 0.499 1750 C 0.499 2712.225, 0.612 3105.862, 0.750 2624.750 C 0.888 2143.637, 0.888 1356.362, 0.750 875.250 C 0.612 394.137, 0.499 787.775, 0.499 1750 M 476.500 269.579 C 450.468 275.296, 439.813 278.787, 422.994 287.107 C 396.383 300.271, 372.960 318.211, 351.003 342.243 C 344.434 349.433, 338.126 357.355, 336.948 359.894 C 335.773 362.427, 333.025 366.640, 330.842 369.255 C 320.634 381.483, 305.058 425.596, 300.940 453.945 C 297.408 478.254, 304.338 524.553, 315.955 554.266 C 340.071 615.948, 395.261 664.650, 459 680.496 C 472.273 683.795, 480.727 684.923, 500.085 685.976 C 523.467 687.248, 524.858 688.179, 529.080 705.386 C 530.310 710.399, 535.111 725.525, 539.750 739 C 555.167 783.783, 565.036 813.351, 569.123 827 C 571.346 834.425, 574.927 844.275, 577.082 848.888 C 579.237 853.502, 581 858.804, 581 860.670 C 581 862.536, 583.193 869.786, 585.874 876.781 C 592.969 895.294, 602 924.748, 602 929.377 C 602 930.267, 595.169 932.666, 581.750 936.489 C 495.147 961.162, 438.851 992.338, 383.101 1046.500 C 349.455 1079.187, 324.619 1109.686, 305.332 1142 C 296.629 1156.582, 275.231 1198.696, 271.471 1208.644 C 266.620 1221.481, 259.890 1246.453, 255.476 1268 C 253.053 1279.825, 250.374 1291.975, 249.522 1295 C 246.887 1304.357, 246.046 1425.161, 246.033 1796.500 C 246.017 2242.621, 248.156 2655.441, 250.930 2741.500 L 251.736 2766.500 257.426 2786.500 C 268.134 2824.140, 270.117 2830.515, 274.685 2842 C 303.297 2913.929, 364.663 2989.542, 431.500 3035.222 C 467.328 3059.709, 501.270 3075.866, 544.500 3089.014 C 553.850 3091.858, 578.334 3098.418, 598.908 3103.592 L 636.317 3113 968.936 3113 C 1257.061 3113, 1301.830 3112.807, 1303.614 3111.558 C 1305.402 3110.306, 1402.308 3110.060, 2039.087 3109.692 C 2848.929 3109.225, 2846.944 3109.241, 2882.803 3102.948 C 2907.270 3098.654, 2947.039 3087.392, 2976.986 3076.277 C 2996.137 3069.169, 3002.014 3066.419, 3021.627 3055.385 C 3028.847 3051.323, 3035.198 3048, 3035.740 3048 C 3037.981 3048, 3061.399 3031.476, 3073.438 3021.400 C 3098.189 3000.685, 3129.978 2968.132, 3150.839 2942.137 C 3168.209 2920.493, 3180.255 2900.649, 3197.966 2864.500 C 3209.665 2840.623, 3212.640 2833.108, 3217.957 2814 C 3220.176 2806.025, 3223.595 2794.325, 3225.555 2788 C 3234.575 2758.891, 3236.327 2733.319, 3238.059 2605.500 C 3239.530 2496.984, 3238.731 1375.369, 3237.153 1333.500 C 3235.751 1296.309, 3234.680 1285.890, 3230.930 1273 C 3229.251 1267.225, 3227.493 1258.893, 3227.024 1254.485 C 3226.443 1249.022, 3224.906 1243.292, 3222.196 1236.485 C 3220.009 1230.993, 3216.594 1221.287, 3214.606 1214.915 C 3212.137 1207, 3207.056 1195.435, 3198.569 1178.415 C 3176.350 1133.850, 3168.474 1120.892, 3148.481 1096 C 3093.925 1028.078, 3037.995 986.370, 2960 955.447 C 2928.600 942.998, 2908.747 936.800, 2892.821 934.474 C 2890.798 934.178, 2888.125 933.112, 2886.882 932.105 C 2884.701 930.340, 2884.667 930.064, 2885.917 924.387 C 2888.638 912.036, 2896.711 885.782, 2912.481 838 C 2921.466 810.775, 2934.011 771.625, 2940.360 751 C 2949.376 721.706, 2960.271 688.697, 2961.370 687.340 C 2961.442 687.252, 2970.050 686.448, 2980.500 685.554 C 3019.374 682.226, 3039.157 677.619, 3062.651 666.422 C 3110.191 643.766, 3161.022 584.363, 3175.439 534.615 C 3179.929 519.118, 3181.728 489.799, 3180.080 458.982 C 3178.830 435.628, 3177.224 425.710, 3172.489 412.108 C 3161.189 379.643, 3144.856 352.054, 3124.530 331.098 C 3092.549 298.126, 3070.362 285.214, 3025.500 273.463 C 2984.865 262.820, 2947.916 263.690, 2910.240 276.178 C 2852.657 295.264, 2804.095 340.495, 2779.863 397.612 C 2769.069 423.056, 2764.085 446.202, 2763.307 474.500 C 2761.934 524.422, 2774.519 562.236, 2807.073 606 C 2818.932 621.943, 2842.878 645.998, 2856.154 655.305 L 2865.809 662.073 2856.966 688.286 C 2852.103 702.704, 2841.549 735.425, 2833.513 761 C 2816.527 815.057, 2797.752 874.195, 2788.749 902 L 2782.434 921.500 2157.467 921.262 C 1813.735 921.130, 1345.692 920.737, 1117.371 920.388 L 702.242 919.752 701.046 915.626 C 698.177 905.725, 672.931 827.970, 647.233 749.884 L 619.385 665.268 650.474 633.884 C 667.590 616.605, 684.615 598.455, 688.354 593.500 C 695.341 584.241, 705.702 564.381, 710.265 551.500 C 716.204 534.738, 721.997 502.124, 722.699 481.500 C 725.001 413.890, 685.451 341.814, 623.566 300.840 C 594.165 281.373, 564.833 271.237, 524.121 266.475 C 505 264.238, 499.046 264.626, 476.500 269.579 M 1088.500 1483.046 C 1077.240 1484.205, 1054.286 1489.880, 1039.205 1495.232 C 1014.313 1504.065, 986.608 1519.981, 965.215 1537.737 C 951.535 1549.091, 928.993 1572.469, 919.604 1585.040 C 901.524 1609.247, 886.057 1641.889, 875.831 1677.421 C 871.236 1693.387, 870.673 1699.224, 871.334 1724 C 872.444 1765.541, 877.555 1794.174, 889.027 1823.122 C 910.242 1876.655, 959.019 1928.343, 1013.485 1955.009 C 1047.207 1971.518, 1080.432 1979.142, 1119 1979.219 C 1148.252 1979.278, 1169.748 1975.974, 1196.323 1967.335 C 1259.128 1946.919, 1309.924 1904.846, 1342.210 1846.500 C 1355.560 1822.373, 1366.161 1793.084, 1369.536 1771 C 1371.236 1759.877, 1371.496 1722.595, 1369.976 1708 C 1365.008 1660.315, 1349.208 1620.298, 1320.081 1581.628 C 1299.925 1554.868, 1261.245 1518.911, 1247.801 1514.437 C 1245.216 1513.577, 1239.273 1510.393, 1234.594 1507.362 C 1218.140 1496.703, 1189.838 1488.970, 1151 1484.520 C 1134.267 1482.603, 1100.529 1481.807, 1088.500 1483.046 M 2324.500 1483.986 C 2305.631 1486.280, 2271.888 1497.950, 2250 1509.751 C 2227.440 1521.915, 2211.755 1533.381, 2193.594 1550.988 C 2156.543 1586.907, 2136.569 1618.904, 2126.535 1658.414 C 2119.891 1684.571, 2117.308 1716.798, 2118.975 1752.730 C 2120.625 1788.317, 2124.626 1804.308, 2139.936 1836.500 C 2153.881 1865.821, 2188.809 1910.928, 2209.436 1926.252 C 2225.794 1938.404, 2267.222 1961.357, 2278.288 1964.399 C 2281.155 1965.187, 2292.500 1968.329, 2303.500 1971.381 C 2330.086 1978.759, 2338.341 1979.991, 2361.199 1979.996 C 2396.270 1980.004, 2428.734 1973.463, 2463.149 1959.456 C 2494.070 1946.871, 2516.859 1932.021, 2537.718 1910.864 C 2582.980 1864.957, 2613.393 1796.549, 2615.683 1735.500 C 2616.538 1712.717, 2613.586 1693.331, 2605.382 1667.852 C 2584.616 1603.355, 2545.172 1549.391, 2496.960 1519.520 C 2468.466 1501.865, 2432.213 1487.786, 2408 1484.972 C 2396.035 1483.582, 2333.861 1482.847, 2324.500 1483.986 M 1360.781 2188.399 C 1352.217 2191.922, 1346.070 2196.231, 1338.653 2203.914 C 1315.457 2227.941, 1315.415 2271.500, 1338.499 2365.530 C 1352.010 2420.571, 1373.817 2467.199, 1406.362 2510.644 C 1449.812 2568.645, 1504.230 2612.445, 1570.556 2642.801 C 1600.204 2656.371, 1618.996 2662.618, 1642 2666.552 C 1649.975 2667.916, 1660.550 2669.902, 1665.500 2670.965 C 1682.850 2674.689, 1695.772 2675.457, 1741.500 2675.479 C 1788.181 2675.501, 1796.045 2674.992, 1820.500 2670.363 C 1844.623 2665.798, 1875.323 2656.998, 1897.500 2648.294 C 1979.250 2616.206, 2055.820 2549.596, 2102.889 2469.622 C 2116.045 2447.270, 2131.215 2413.557, 2136.015 2396.004 C 2137.595 2390.227, 2140.199 2381.225, 2141.802 2376 C 2145.034 2365.461, 2145.703 2362.660, 2153.001 2329.109 C 2161.086 2291.938, 2163.174 2270.916, 2161.040 2248.182 C 2158.825 2224.584, 2154.888 2214.905, 2142.417 2202.395 C 2121.421 2181.333, 2091.987 2180.536, 2070.208 2200.441 C 2063.583 2206.495, 2061.023 2210.421, 2057.711 2219.605 C 2054.167 2229.429, 2051.460 2246.930, 2048.524 2279 C 2044.243 2325.755, 2042.130 2336.777, 2033.147 2359.202 C 2002.066 2436.797, 1961.211 2488.578, 1904.298 2522.510 C 1889.442 2531.368, 1864.401 2543.849, 1848.192 2550.474 C 1827.067 2559.110, 1820.724 2560.705, 1788.188 2565.568 C 1753.236 2570.791, 1738.487 2571.399, 1715.500 2568.564 C 1636.448 2558.811, 1586.092 2536.634, 1530.602 2487.134 C 1505.410 2464.662, 1489.391 2442.643, 1468.959 2402.403 C 1446.958 2359.074, 1438.965 2328.775, 1434.464 2271.649 C 1431.339 2231.980, 1426.104 2214.421, 1413.735 2202.117 C 1400.202 2188.654, 1375.635 2182.290, 1360.781 2188.399" /></svg>
                        

                        <p className="massage-text px-4 py-3 max-w-[75%] text-[15px] bg-[#f6f2ff]">
                            Heyy there ðŸ‘‹,<br /> How can i help you today?
                        </p>
                    </div>

                    {/* Render the chat history */}
                    {chatHistory.map((chat, index) => (
                        <ChatMassage key={index} chat={chat} />
                    ))}
                </div>

                {/* Chat footer */}
                <div className="chat-footer absolute bottom-0 w-[100%] px-5 py-4">
                    <ChatForm chatHistory={chatHistory} setChatHistory={setChatHistory} generateBotResponse={generateBotResponse} />
                </div>
            </div>
        </div>
    );
}

export default ChatBot;